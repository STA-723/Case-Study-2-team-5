---
title: "Exploratory Analysis of Data for Airbnb Listings in NYC"
author: "Youngsoo Baek, Irene Yi Ji, Phuc Nguyen"
output: beamer_presentation
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, message = FALSE, warning = FALSE)
library(dplyr)
library(ggplot2)
library(lubridate)
# Dataset we are using (ref. to as airbnb)
airbnb <- read.csv("./AB_NYC_2019.csv") %>% 
    mutate(price = ifelse(price==0, 5, price),
           reviews_per_month = ifelse(is.na(reviews_per_month), 0, reviews_per_month),
           last_review = 2019 - year(ymd(last_review)),
           available_spec = (availability_365 != 0) ) %>%
    # available_spec does not actually mean "available," but rather two diff. groups
    # that have specified the variable or not
    # Whichever listings without any review will have NA values!
    filter(minimum_nights <= 365)
```

## Exploratory Analysis

### Heterogeneity among Boroughs
```{r, include=FALSE, fig.width=5}
airbnb_eda <- read.csv("./AB_NYC_2019.csv")
# chi-square test
airbnb_eda <- airbnb_eda %>% mutate(price_level = ifelse(price<=quantile(price, 0.25), "below Q1", ifelse(price<=quantile(price, 0.75), "between Q1 and Q3", "above Q3")))
airbnb_eda$price_level <- factor(airbnb_eda$price_level, levels = c("below Q1", "between Q1 and Q3", "above Q3"))

Price_Level_by_Boroughs <- table(airbnb_eda$price_level, airbnb_eda$neighbourhood_group)
chisq.test(Price_Level_by_Boroughs)
```

```{r, echo=FALSE}
library(knitr)
library(kableExtra)
kable(Price_Level_by_Boroughs) %>%
    kable_styling(full_width=F)
```

* Pearson's Chi-squared test  
X-squared = 6196.4, df = 8, p-value < 2.2e-16


```{r, echo=FALSE, fig.width=5, fig.height=4}
library(ggmosaic)
ggplot(data = airbnb_eda) +
  geom_mosaic(aes(x = product(price_level, neighbourhood_group), fill=price_level), na.rm=TRUE) +
  labs(x="Boroughs", y="Price Level") + ggtitle("Price Level by Boroughs") +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))
```


## Response of Interest: Price and Popularity

## Choosing a Meaningful Measure of Popularity

## Heterogeneity across Neighbourhoods/Boroughs

## Spatial Correlation

## Predictors of Interest

## Possibly Unreliable Predictors

## Modeling

## Price and Popularity: Bivariate Mixed Effects Regression

## Did We Miss Spatial Correlation Within Neighbourhoods?

## Text Analysis for Listing Names

## Further Work
